# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
#Use text mode install
text
lang en_US.UTF-8
keyboard us
reboot --eject

network --onboot yes --device eth0 --bootproto dhcp --noipv6 --hostname db_host
rootpw --plaintext oracle
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone --utc America/New_York
#Do not configure the X Window System
skipx

bootloader --location=mbr --driveorder=sda
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --none --drives=sda

#part / --fstype=ext4 --asprimary --size=18000
#part swap --size=1800
clearpart --all --initlabel
zerombr
part / --asprimary --fstype="ext4" --ondisk=sda --size=17000
part swap --asprimary --fstype="swap" --grow --ondisk=sda --size=1


%packages
# Core packages
@core
@server-policy
@uek3-kernel-repo

# Additional packages (necessary for Oracle installation)
vim
openssh-server
openssh-clients
wget
unzip
# moving this to a after boot install
#oracle-rdbms-server-12cR1-preinstall
ntpdate
ntp

%end


%post --log=/root/ks-post.log --interpreter=/bin/bash

## Execute preinstall-verify
## moving this to an after boot install
##oracle-rdbms-server-12cR1-preinstall-verify


#Create a tmpfs
# add tmpfs mounts
cat >>/etc/fstab<<EOF
tmpfs                   /tmp                tmpfs   size=1024M       0 0
EOF

#
# create the oracle user and password
#
#
/usr/bin/yum -y install sudo
/usr/sbin/groupadd oracle
useradd oracle -g oracle -G wheel
echo "oracle"|passwd --stdin oracle
echo "oracle          ALL=(ALL)     NOPASSWD: ALL" >> /etc/sudoers.d/oracle
chmod 0440 /etc/sudoers.d/oracle
#set password oracle user

%end

